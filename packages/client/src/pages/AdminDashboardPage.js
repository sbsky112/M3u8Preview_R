import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { useQuery } from '@tanstack/react-query';
import { Link } from 'react-router-dom';
import { Film, Users, FolderOpen, Play, Settings, Download } from 'lucide-react';
import { adminApi } from '../services/adminApi.js';
export function AdminDashboardPage() {
    const { data: stats, isLoading } = useQuery({
        queryKey: ['admin', 'dashboard'],
        queryFn: () => adminApi.getDashboard(),
    });
    if (isLoading) {
        return (_jsxs("div", { className: "space-y-6 animate-pulse", children: [_jsx("div", { className: "h-8 w-48 bg-emby-bg-input rounded" }), _jsx("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4", children: Array.from({ length: 4 }).map((_, i) => (_jsx("div", { className: "h-24 bg-emby-bg-input rounded-lg" }, i))) })] }));
    }
    if (!stats)
        return null;
    const statCards = [
        { label: '总媒体数', value: stats.totalMedia, icon: Film, color: 'text-blue-400' },
        { label: '总用户数', value: stats.totalUsers, icon: Users, color: 'text-green-400' },
        { label: '分类数', value: stats.totalCategories, icon: FolderOpen, color: 'text-purple-400' },
        { label: '总播放量', value: stats.totalViews, icon: Play, color: 'text-orange-400' },
    ];
    return (_jsxs("div", { className: "space-y-8", children: [_jsxs("div", { className: "flex items-center gap-3", children: [_jsx(Settings, { className: "w-6 h-6 text-emby-text-secondary" }), _jsx("h1", { className: "text-2xl font-bold text-white", children: "\u7BA1\u7406\u9762\u677F" })] }), _jsx("div", { className: "grid grid-cols-2 md:grid-cols-4 gap-4", children: statCards.map((card) => (_jsxs("div", { className: "bg-emby-bg-card border border-emby-border-subtle rounded-md p-5", children: [_jsx("div", { className: "flex items-center justify-between", children: _jsx(card.icon, { className: `w-6 h-6 ${card.color}` }) }), _jsx("p", { className: "text-3xl font-bold text-white mt-3", children: card.value.toLocaleString() }), _jsx("p", { className: "text-sm text-emby-text-secondary mt-1", children: card.label })] }, card.label))) }), _jsxs("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [_jsxs(Link, { to: "/admin/users", className: "bg-emby-bg-card border border-emby-border-subtle rounded-md p-5 hover:border-emby-border-light transition-colors group", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Users, { className: "w-5 h-5 text-emby-text-secondary group-hover:text-emby-green-light" }), _jsx("h3", { className: "text-white font-semibold group-hover:text-emby-green-light", children: "\u7528\u6237\u7BA1\u7406" })] }), _jsx("p", { className: "text-emby-text-muted text-sm mt-1", children: "\u7BA1\u7406\u7528\u6237\u89D2\u8272\u548C\u72B6\u6001" })] }), _jsxs(Link, { to: "/admin/media", className: "bg-emby-bg-card border border-emby-border-subtle rounded-md p-5 hover:border-emby-border-light transition-colors group", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Film, { className: "w-5 h-5 text-emby-text-secondary group-hover:text-emby-green-light" }), _jsx("h3", { className: "text-white font-semibold group-hover:text-emby-green-light", children: "\u5A92\u4F53\u7BA1\u7406" })] }), _jsx("p", { className: "text-emby-text-muted text-sm mt-1", children: "\u7BA1\u7406\u6240\u6709\u5A92\u4F53\u5185\u5BB9" })] }), _jsxs(Link, { to: "/import", className: "bg-emby-bg-card border border-emby-border-subtle rounded-md p-5 hover:border-emby-border-light transition-colors group", children: [_jsxs("div", { className: "flex items-center gap-2", children: [_jsx(Download, { className: "w-5 h-5 text-emby-text-secondary group-hover:text-emby-green-light" }), _jsx("h3", { className: "text-white font-semibold group-hover:text-emby-green-light", children: "\u6279\u91CF\u5BFC\u5165" })] }), _jsx("p", { className: "text-emby-text-muted text-sm mt-1", children: "\u5BFC\u5165M3U8\u94FE\u63A5" })] })] }), _jsxs("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [_jsxs("div", { className: "bg-emby-bg-card border border-emby-border-subtle rounded-md p-5", children: [_jsx("h3", { className: "text-white font-semibold mb-4", children: "\u6700\u8FD1\u6DFB\u52A0" }), _jsx("div", { className: "space-y-3", children: stats.recentMedia.map((media) => (_jsxs(Link, { to: `/media/${media.id}`, className: "flex items-center gap-3 text-sm group", children: [_jsx("div", { className: "w-16 aspect-video bg-emby-bg-input rounded flex-shrink-0 overflow-hidden", children: media.posterUrl ? (_jsx("img", { src: media.posterUrl, className: "w-full h-full object-cover" })) : (_jsx("div", { className: "w-full h-full flex items-center justify-center", children: _jsx(Film, { className: "w-4 h-4 text-emby-text-muted" }) })) }), _jsxs("div", { className: "min-w-0", children: [_jsx("p", { className: "text-white truncate group-hover:text-emby-green-light", children: media.title }), _jsx("p", { className: "text-emby-text-muted text-xs", children: media.category?.name || '未分类' })] })] }, media.id))) })] }), _jsxs("div", { className: "bg-emby-bg-card border border-emby-border-subtle rounded-md p-5", children: [_jsx("h3", { className: "text-white font-semibold mb-4", children: "\u70ED\u95E8\u5185\u5BB9" }), _jsx("div", { className: "space-y-3", children: stats.topMedia.map((media, index) => (_jsxs(Link, { to: `/media/${media.id}`, className: "flex items-center gap-3 text-sm group", children: [_jsx("span", { className: "text-emby-text-muted font-mono w-6 text-center", children: index + 1 }), _jsx("div", { className: "min-w-0 flex-1", children: _jsx("p", { className: "text-white truncate group-hover:text-emby-green-light", children: media.title }) }), _jsxs("span", { className: "text-emby-text-muted text-xs flex-shrink-0", children: [media.views, " \u6B21"] })] }, media.id))) })] })] })] }));
}
